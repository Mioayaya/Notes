# Neta Game

## 1. [鸣潮] 待机、移动、摄像机视角控制复刻

### 1.1 待机
- 有三个待机动画，目测是随机播放

### 1.2 移动
- wsad 控制移动，同时按住ad或者ws角色会停止移动(缓冲动画),类似于InputSystem，两个方向同时按下，向量相加为0，这点在按住wa，wd，sa，sd会做斜方向运动可以看出
- control(LeftCtrl键) 切换行走、奔跑
- LeftShift 冲速，有一段冲刺动画，结束后加速奔跑，按下一次后就会锁定加速奔跑，此时同时按住ad，ws也会停下也印证了以向量为基础的移动模式

### 1.3 摄像机视角
- 转动视角，按下 wsad，角色会朝当前视角方向的上下左右移动，若角色面朝不一样会自行转动
- 移动中转动视角，角色面朝方向(移动方向)会朝着视角转动，比如按住w，移动方向会跟随屏幕的正前方(正北方)
- 滚轮缩放具有最大值和最小值
- 视角向上到一定程度透明化
- 默认隐藏鼠标，按 alt 呼出鼠标

### 1.4 遇到的问题
- 尝试在Move方法里利用相机方向得到世界坐标，并且使得视角转动     <hr/>
Q: 但是实际上效果不尽人意，(1). 在角色不动的时候，转动视角角色会跟随镜头一起移动，(2). 在角色运动的时候转动视角，角色以一种奇怪的方式移动。并且虽然是朝着屏幕的方向移动，但是动画还是朝着世界坐标方向运动，这与预期的效果不符合  
A: (1). 角色不动的时候，转动视角会跟随移动，在判断是否移动的时候把应该与Vector3.zero 比较的 PlayerMovemen 写成了 最终移动，但是照理来说 moveDir(最终移动方向) 在未输入的时候下也应该是 0，在debug打印之后发现是(0,1), 在角色不动的时候发现是默认角色朝向的值。<span style="color:pink">**应该使用最原本的输入数据，playerInputVector进行比较** </span>修改后，在角色停止时，可以正常得转动视角而不会转动角色了。  
(2). 与 RotatePlayer函数中，旋转角色冲突了，注释掉即可。

### 1.5 实现
InpuSystem 控制角色基础移动，wsad控制移动方向，ctrl切换移动和奔跑，shift加速奔跑；  
使用blenTree控制4个状态动画的切换，以Speed为影响因子；  
使用 KinematicCharacterController 插件的摄像头作为摄像机，同1.4；  

### 1.6 更新
使用rootmation优化，解决滑步问题，增加缓冲动画和待机动画切换 